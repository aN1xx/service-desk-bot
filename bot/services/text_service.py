"""
Bot text service with caching and multi-language support.
All bot messages are stored in DB and can be edited via admin panel.
"""
import logging
import time
from typing import Optional

from sqlalchemy.ext.asyncio import AsyncSession

from bot.db.repositories import bot_text_repo
from bot.utils.language import current_language, DEFAULT_LANGUAGE

logger = logging.getLogger(__name__)

# In-memory cache for texts: {key: {lang: value}}
_cache: dict[str, dict[str, str]] = {}
_cache_loaded: bool = False
_cache_updated_at: float = 0.0
CACHE_TTL: int = 60  # seconds


# === DEFAULT TEXTS (Russian) ===

DEFAULT_TEXTS = {
    # === AUTH & START ===
    "start_welcome": (
        "üèô <b>Qvartal Smart Security Bot</b>\n\n"
        "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∂–∏–ª—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–∞—Ö.\n\n"
        "üîπ –ü—Ä–∏–µ–º –∑–∞—è–≤–æ–∫ –æ—Ç –∂–∏—Ç–µ–ª–µ–π –ñ–ö\n"
        "üîπ –ö–æ–Ω—Ç—Ä–æ–ª—å –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è, –¥–æ–º–æ—Ñ–æ–Ω–∏–∏ –∏ –°–ö–£–î\n"
        "üîπ –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n\n"
        "–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∞—à –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏."
    ),
    "auth_success": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <b>{full_name}</b>.",
    "auth_failed": "–í—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –±–∞–∑–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤.\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–µ—Ä–≤–∏—Å–Ω—É—é —Å–ª—É–∂–±—É –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.",
    "auth_send_contact": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç¬ª –Ω–∏–∂–µ.",

    # === MENUS ===
    "menu_owner": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
    "menu_master": "–ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞:",
    "menu_admin": "–ü–∞–Ω–µ–ª—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è:",

    # === COMMON ===
    "action_cancelled": "–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ.",
    "no_active_action": "–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã.",
    "error_auth": "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.",
    "error_not_found": "–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.",
    "error_generic": "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",

    # === HELP ===
    "help_text": (
        "<b>–°–µ—Ä–≤–∏—Å–Ω—ã–π –±–æ—Ç Qvartal Smart Security</b>\n\n"
        "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n"
        "/start ‚Äî –Ω–∞—á–∞—Ç—å / –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å\n"
        "/help ‚Äî –ø–æ–º–æ—â—å\n"
        "/cancel ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ"
    ),

    # === TICKET CREATION ===
    "create_limit_reached": "–í—ã —É–∂–µ —Å–æ–∑–¥–∞–ª–∏ {count} –∑–∞—è–≤–æ–∫ —Å–µ–≥–æ–¥–Ω—è. –õ–∏–º–∏—Ç: {limit}/–¥–µ–Ω—å.",
    "create_choose_complex": "–í—ã–±–µ—Ä–∏—Ç–µ –ñ–ö:",
    "create_choose_entrance": "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–æ–¥—ä–µ–∑–¥–∞:",
    "create_choose_block": "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –±–ª–æ–∫–∞:",
    "create_enter_entrance": "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–æ–¥—ä–µ–∑–¥–∞:",
    "create_enter_apartment": "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã:",
    "create_choose_category": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —É—Å–ª—É–≥–∏:",
    "create_enter_description": "–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ:",
    "create_cancelled": "–ó–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞.",
    "create_submitted": "–ó–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –ø—Ä–∏–Ω—è—Ç–∞. –°—Ç–∞—Ç—É—Å: <b>–ù–æ–≤–∞—è</b>\n\n–ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å—Ç–∞—Ç—É—Å–∞.",
    "create_submitted_approval": (
        "–ó–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –ø—Ä–∏–Ω—è—Ç–∞.\n"
        "–°—Ç–∞—Ç—É—Å: <b>–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</b>\n\n"
        "–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞ –º–∞—Å—Ç–µ—Ä–æ–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. "
        "–ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å –æ —Ä–µ—à–µ–Ω–∏–∏."
    ),

    # === CCTV ===
    "cctv_choose_subtype": "–ß—Ç–æ –Ω—É–∂–Ω–æ?",

    # === FACE ID ===
    "face_id_intro": (
        "–í—ã –≤—ã–±—Ä–∞–ª–∏: <b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –±–∞–∑—É FACE ID</b>.\n\n"
        "–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –ª–∏—Ü–∞ –∫–∞–∂–¥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ (–ø–æ 1 —Ñ–æ—Ç–æ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞).\n"
        "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –ª–∏—Ü–æ –∫—Ä—É–ø–Ω–æ, –±–µ–∑ –æ—á–∫–æ–≤/–º–∞—Å–∫–∏, —Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ.\n\n"
        "–ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–æ—Ç–æ ‚Äî –Ω–∞–∂–º–∏—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª."
    ),
    "face_id_photo_added": "–§–æ—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ ({count} —à—Ç.). –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â—ë –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª.",
    "face_id_describe": "–û–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –ø–æ–¥—Ä–æ–±–Ω–æ (–∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É¬ª):",

    # === CAR PLATE ===
    "car_plate_intro": "–í—ã –≤—ã–±—Ä–∞–ª–∏: <b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</b>.\n\n–í–≤–µ–¥–∏—Ç–µ –≥–æ—Å–Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–ø—Ä–∏–º–µ—Ä: 777ABC02):",
    "car_plate_choose_gate": "–° –∫–∞–∫–æ–≥–æ –∑–∞–µ–∑–¥–∞ –≤—ã –∑–∞–µ–∑–∂–∞–µ—Ç–µ?",
    "car_plate_has_parking": "–£ –≤–∞—Å –µ—Å—Ç—å –ø–∞—Ä–∫–∏–Ω–≥?",
    "car_plate_upload_contract": (
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –ø–∞—Ä–∫–∏–Ω–≥–∞.\n\n"
        "–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∞ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞."
    ),
    "car_plate_enter_reason": (
        "–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å–Ω–æ–º–µ—Ä–∞ –¥–ª—è –ø—Ä–æ–µ–∑–¥–∞ —á–µ—Ä–µ–∑ —à–ª–∞–≥–±–∞—É–º:\n\n"
        "(–Ω–∞–ø—Ä–∏–º–µ—Ä: –≥–æ—Å—Ç—å, —Ç–∞–∫—Å–∏, –∫—É—Ä—å–µ—Ä, –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä –∏ —Ç.–¥.)"
    ),
    "car_plate_enter_parking": "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –ø–∞—Ä–∫–∏–Ω–≥–∞:",

    # === CAMERA ACCESS ===
    "camera_enter_email": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∞—à—É –ø–æ—á—Ç—É (email):",
    "camera_enter_details": "–ù–∞–ø–∏—à–∏—Ç–µ, –∫ –∫–∞–∫–∏–º –∫–∞–º–µ—Ä–∞–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø (–Ω–æ–º–µ—Ä–∞ –±–ª–æ–∫–æ–≤, –ø–æ–¥—ä–µ–∑–¥–æ–≤ –∏ —ç—Ç–∞–∂–µ–π):",

    # === INTERCOM ===
    "intercom_intro": "–í—ã –≤—ã–±—Ä–∞–ª–∏: <b>–î–æ–º–æ—Ñ–æ–Ω ‚Äî –ø–æ–ª–æ–º–∫–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞</b>.\n–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è:",

    # === KEY/MAGNET ===
    "key_intro": "–í—ã –≤—ã–±—Ä–∞–ª–∏: <b>–ü—Ä–æ—à–∏–≤–∫–∞ –∫–ª—é—á–∞/–º–∞–≥–Ω–∏—Ç–∞</b>.\n\n–°–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π –Ω—É–∂–Ω–æ?",
    "key_choose_type": "–ù–æ–≤—ã–π –∫–ª—é—á –∏–ª–∏ –ø–µ—Ä–µ–ø—Ä–æ—à–∏–≤–∫–∞?",
    "key_add_comment": "–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª:",

    # === OTHER ===
    "other_intro": "–í—ã –≤—ã–±—Ä–∞–ª–∏: <b>–ü—Ä–æ—á–µ–µ</b>.\n\n–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ ‚Äî –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –º–∞—Å—Ç–µ—Ä—É.\n–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ:",

    # === PHOTOS ===
    "photo_added": "–§–æ—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ ({count} —à—Ç.). –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â—ë –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª.",
    "file_added": "–§–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω ({count} —à—Ç.). –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â—ë –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª.",
    "describe_request": "–û–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:",

    # === OWNER TICKETS ===
    "owner_no_tickets": "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫.",
    "owner_tickets_page": "–í–∞—à–∏ –∑–∞—è–≤–∫–∏ (—Å—Ç—Ä. {page}/{total}):",
    "choose_instruction": "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:",

    # === RATING ===
    "rate_prompt": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ <b>‚Ññ{ticket_id}</b>:",
    "rate_ask_comment": "–í—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –æ—Ü–µ–Ω–∫—É: {stars}‚≠ê\n\n–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?",
    "rate_comment_prompt": "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:",
    "rate_thanks": "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –æ—Ü–µ–Ω–∫—É!",
    "rate_already": "–í—ã —É–∂–µ –æ—Ü–µ–Ω–∏–ª–∏ —ç—Ç—É –∑–∞—è–≤–∫—É.",

    # === MASTER ===
    "master_no_new": "–ù–µ—Ç –∑–∞—è–≤–æ–∫ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º ¬´–ù–æ–≤–∞—è¬ª.",
    "master_no_tickets": "–ù–µ—Ç –∑–∞—è–≤–æ–∫ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º ¬´{status}¬ª.",
    "master_new_tickets": "–ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ ‚Äî —Å—Ç—Ä. {page}/{total}:",
    "master_tickets_page": "–ó–∞—è–≤–∫–∏ ({status}) ‚Äî —Å—Ç—Ä. {page}/{total}:",
    "master_no_complexes": "–í–∞–º –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –∂–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã.",
    "master_ticket_accepted": "–í—ã –ø—Ä–∏–Ω—è–ª–∏ –∑–∞—è–≤–∫—É <b>‚Ññ{ticket_id}</b>.",
    "master_ticket_completed": "–ó–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è.\n–ö–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ü–µ–Ω–∫—É.",
    "master_already_in_progress": "–ó–∞—è–≤–∫–∞ —É–∂–µ –≤ —Ä–∞–±–æ—Ç–µ.",
    "master_cannot_complete": "–ù–µ–ª—å–∑—è –∑–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç—É –∑–∞—è–≤–∫—É.",

    # === MASTER CAR PLATE APPROVAL ===
    "master_car_plate_approved": (
        "‚úÖ –í—ã –æ–¥–æ–±—Ä–∏–ª–∏ –∑–∞—è–≤–∫—É <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞.\n\n"
        "–ó–∞—è–≤–∫–∞ –ø–µ—Ä–µ–¥–∞–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è."
    ),
    "master_car_plate_rejected": (
        "‚ùå –í—ã –æ—Ç–∫–ª–æ–Ω–∏–ª–∏ –∑–∞—è–≤–∫—É <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞.\n\n"
        "–ó–∞—è–≤–∫–∞ –ø–µ—Ä–µ–¥–∞–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è."
    ),
    "master_already_reviewed": "–ó–∞—è–≤–∫–∞ —É–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞.",

    # === ADMIN ===
    "admin_no_tickets": "–ó–∞—è–≤–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.",
    "admin_tickets_page": "–ó–∞—è–≤–∫–∏{filter} ‚Äî —Å—Ç—Ä. {page}/{total}:",
    "admin_choose_complex": "–í—ã–±–µ—Ä–∏—Ç–µ –ñ–ö:",
    "admin_choose_master": "–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞:",
    "admin_choose_period": "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥:",
    "admin_no_masters": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤.",
    "admin_master_assigned": "–ú–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω!",
    "admin_master_not_found": "–ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω.",
    "admin_choose_master_for": "–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –∑–∞—è–≤–∫–∏ ‚Ññ{ticket_id}:",

    # === ADMIN CAR PLATE ===
    "admin_car_plate_approved": "‚úÖ –ó–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞ <b>–û–î–û–ë–†–ï–ù–ê</b>.\n\n–ö–ª–∏–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω.",
    "admin_car_plate_rejected": "‚ùå –ó–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞ <b>–û–¢–ö–õ–û–ù–ï–ù–ê</b>.\n\n–ö–ª–∏–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω.",

    # === NOTIFICATIONS ===
    "notify_new_ticket": "üÜï –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b>!\n\n{card}",
    "notify_status_changed": "üìã –°—Ç–∞—Ç—É—Å –≤–∞—à–µ–π –∑–∞—è–≤–∫–∏ <b>‚Ññ{ticket_id}</b> –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: <b>{status}</b>",
    "notify_status_with_master": "üìã –°—Ç–∞—Ç—É—Å –≤–∞—à–µ–π –∑–∞—è–≤–∫–∏ <b>‚Ññ{ticket_id}</b> –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: <b>{status}</b>\n–ú–∞—Å—Ç–µ—Ä: {master}",
    "notify_completed": "‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!\n\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã:",
    "notify_car_plate_approval": "üöó –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –≥–æ—Å–Ω–æ–º–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏!\n\n{card}",
    "notify_car_plate_admin_review": "üöó –ó–∞—è–≤–∫–∞ –Ω–∞ –≥–æ—Å–Ω–æ–º–µ—Ä ‚Äî —Ä–µ—à–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞: <b>{decision}</b>\n\n{card}",
    "notify_car_plate_approved": "‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞ <b>–û–î–û–ë–†–ï–ù–ê</b>!\n\n–ì–æ—Å–Ω–æ–º–µ—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º—É.",
    "notify_car_plate_rejected": "‚ùå –í–∞—à–∞ –∑–∞—è–≤–∫–∞ <b>‚Ññ{ticket_id}</b> –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å–Ω–æ–º–µ—Ä–∞ <b>–û–¢–ö–õ–û–ù–ï–ù–ê</b>.\n\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–µ—Ä–≤–∏—Å–Ω—É—é —Å–ª—É–∂–±—É –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è.",
    "notify_car_plate_in_progress": (
        "‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä–∏–ª –∑–∞—è–≤–∫—É –Ω–∞ –≥–æ—Å–Ω–æ–º–µ—Ä!\n\n"
        "{card}\n\n"
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ –≥–æ—Å–Ω–æ–º–µ—Ä –≤ —Å–∏—Å—Ç–µ–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–∞¬ª."
    ),
    "notify_admin_new_ticket": "üÜï –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞:\n\n{card}",

    # === ADMIN MESSAGES ===
    "admin_master_reassigned": "–ú–∞—Å—Ç–µ—Ä –∑–∞—è–≤–∫–∏ ‚Ññ{ticket_id} –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ <b>{master_name}</b>.",

    # === BUTTONS ===
    "btn_send_contact": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç",
    "btn_cancel": "–û—Ç–º–µ–Ω–∞",
    "btn_back": "–ù–∞–∑–∞–¥",
    "btn_done": "–ì–æ—Ç–æ–≤–æ",
    "btn_skip": "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å",
    "btn_confirm": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É",
    "btn_edit": "–ò–∑–º–µ–Ω–∏—Ç—å",
    "btn_create_ticket": "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É",
    "btn_my_tickets": "–ú–æ–∏ –∑–∞—è–≤–∫–∏",
    "btn_instructions": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
    "btn_new_tickets": "–ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏",
    "btn_active_tickets": "–ú–æ–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏",
    "btn_completed": "–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ",
    "btn_accept": "–ü—Ä–∏–Ω—è—Ç—å",
    "btn_complete": "–í—ã–ø–æ–ª–Ω–µ–Ω–∞",
    "btn_approve": "–û–¥–æ–±—Ä–∏—Ç—å",
    "btn_reject": "–û—Ç–∫–ª–æ–Ω–∏—Ç—å",
    "btn_yes_parking": "–î–∞, –µ—Å—Ç—å –ø–∞—Ä–∫–∏–Ω–≥",
    "btn_no_parking": "–ù–µ—Ç –ø–∞—Ä–∫–∏–Ω–≥–∞",
    "btn_rate_add_comment": "–î–∞, –Ω–∞–ø–∏—Å–∞—Ç—å",
    "btn_rate_skip_comment": "–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ",
    "btn_back_to_tickets": "–ù–∞–∑–∞–¥ –∫ –∑–∞—è–≤–∫–∞–º",
    "btn_main_menu": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
    "btn_back_to_ticket": "–ù–∞–∑–∞–¥ –∫ –∑–∞—è–≤–∫–µ",
    "btn_change_language": "–¢—ñ–ª / –Ø–∑—ã–∫",

    # === TOAST MESSAGES (callback.answer) ===
    "toast_ticket_accepted": "–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!",
    "toast_ticket_completed": "–ó–∞—è–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!",
    "toast_ticket_approved": "–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!",
    "toast_ticket_rejected": "–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞!",
    "toast_ticket_submitted": "–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!",
}

# === DEFAULT TEXTS (Kazakh) ===

DEFAULT_TEXTS_KK = {
    "start_welcome": (
        "üèô <b>Qvartal Smart Security Bot</b>\n\n"
        "–¢“±—Ä“ì—ã–Ω “Ø–π –∫–µ—à–µ–Ω–¥–µ—Ä—ñ–Ω–¥–µ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ –∂“Ø–π–µ–ª–µ—Ä—ñ–Ω –æ—Ä–Ω–∞—Ç—É –∂”ô–Ω–µ “õ—ã–∑–º–µ—Ç –∫”©—Ä—Å–µ—Ç—É –±–æ–π—ã–Ω—à–∞ –∫”ô—Å—ñ–±–∏ –∫–æ–º–ø–∞–Ω–∏—è.\n\n"
        "üîπ –¢“Æ–ö —Ç“±—Ä“ì—ã–Ω–¥–∞—Ä—ã–Ω–∞–Ω ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä “õ–∞–±—ã–ª–¥–∞—É\n"
        "üîπ –ë–µ–π–Ω–µ–±–∞“õ—ã–ª–∞—É, –¥–æ–º–æ—Ñ–æ–Ω –∂”ô–Ω–µ –∫—ñ—Ä—É–¥—ñ –±–∞“õ—ã–ª–∞—É –∂“Ø–π–µ–ª–µ—Ä—ñ–Ω–µ —Ç–µ—Ö–Ω–∏–∫–∞–ª—ã“õ “õ—ã–∑–º–µ—Ç –∫”©—Ä—Å–µ—Ç—É\n"
        "üîπ –ñ—ã–ª–¥–∞–º –∫–µ—Ä—ñ –±–∞–π–ª–∞–Ω—ã—Å –∂”ô–Ω–µ “õ–æ–ª–¥–∞—É\n\n"
        "–ñ“±–º—ã—Å—Ç—ã –±–∞—Å—Ç–∞—É “Ø—à—ñ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è–¥–∞–Ω ”©—Ç—É –º–∞“õ—Å–∞—Ç—ã–Ω–¥–∞ –∫–æ–Ω—Ç–∞–∫—Ç—ñ“£—ñ–∑–¥—ñ –∂—ñ–±–µ—Ä—ñ“£—ñ–∑."
    ),
    "auth_success": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å”ô—Ç—Ç—ñ ”©—Ç—Ç—ñ! “ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑, <b>{full_name}</b>.",
    "auth_failed": "–°—ñ–∑ –º–µ–Ω—à—ñ–∫ –∏–µ–ª–µ—Ä—ñ–Ω—ñ“£ –±–∞–∑–∞—Å—ã–Ω–∞–Ω —Ç–∞–±—ã–ª–º–∞–¥—ã“£—ã–∑.\n–¢—ñ—Ä–∫–µ–ª—É “Ø—à—ñ–Ω —Å–µ—Ä–≤–∏—Å—Ç—ñ–∫ “õ—ã–∑–º–µ—Ç–∫–µ —Ö–∞–±–∞—Ä–ª–∞—Å—ã“£—ã–∑.",
    "auth_send_contact": "–¢”©–º–µ–Ω–¥–µ–≥—ñ ¬´–ö–æ–Ω—Ç–∞–∫—Ç—Ç—ã –∂—ñ–±–µ—Ä—É¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.",
    "menu_owner": "–ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä:",
    "menu_master": "–®–µ–±–µ—Ä –ø–∞–Ω–µ–ª—ñ:",
    "menu_admin": "–ë–∞—Å—à—ã –ø–∞–Ω–µ–ª—ñ:",
    "action_cancelled": "”ò—Ä–µ–∫–µ—Ç —Ç–æ“õ—Ç–∞—Ç—ã–ª–¥—ã.",
    "no_active_action": "–¢–æ“õ—Ç–∞—Ç—É“ì–∞ –±–µ–ª—Å–µ–Ω–¥—ñ ”ô—Ä–µ–∫–µ—Ç –∂–æ“õ.",
    "error_auth": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è “õ–∞—Ç–µ—Å—ñ.",
    "error_not_found": "”®—Ç—ñ–Ω—ñ–º —Ç–∞–±—ã–ª–º–∞–¥—ã.",
    "error_generic": "“ö–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã. –ö–µ–π—ñ–Ω—ñ—Ä–µ–∫ “õ–∞–π—Ç–∞–ª–∞“£—ã–∑.",
    "help_text": (
        "<b>Qvartal Smart Security —Å–µ—Ä–≤–∏—Å—Ç—ñ–∫ –±–æ—Ç—ã</b>\n\n"
        "“ö–æ–ª–∂–µ—Ç—ñ–º–¥—ñ –∫–æ–º–∞–Ω–¥–∞–ª–∞—Ä:\n"
        "/start ‚Äî –±–∞—Å—Ç–∞—É / “õ–∞–π—Ç–∞ —ñ—Å–∫–µ “õ–æ—Å—É\n"
        "/help ‚Äî –∞–Ω—ã“õ—Ç–∞–º–∞\n"
        "/cancel ‚Äî –∞“ì—ã–º–¥–∞“ì—ã ”ô—Ä–µ–∫–µ—Ç—Ç—ñ —Ç–æ“õ—Ç–∞—Ç—É"
    ),
    "create_limit_reached": "–°—ñ–∑ –±“Ø–≥—ñ–Ω {count} ”©—Ç—ñ–Ω—ñ–º –∂–∞—Å–∞–¥—ã“£—ã–∑. –õ–∏–º–∏—Ç: –∫“Ø–Ω—ñ–Ω–µ {limit}.",
    "create_choose_complex": "–¢“Æ–ö —Ç–∞“£–¥–∞“£—ã–∑:",
    "create_choose_entrance": "–ö—ñ—Ä–µ–±–µ—Ä—ñ—Å –Ω”©–º—ñ—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑:",
    "create_choose_block": "–ë–ª–æ–∫ –Ω”©–º—ñ—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑:",
    "create_enter_entrance": "–ö—ñ—Ä–µ–±–µ—Ä—ñ—Å –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:",
    "create_enter_apartment": "–ü”ô—Ç–µ—Ä –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:",
    "create_choose_category": "“ö—ã–∑–º–µ—Ç —Å–∞–Ω–∞—Ç—ã–Ω —Ç–∞“£–¥–∞“£—ã–∑:",
    "create_enter_description": "–ú”ô—Å–µ–ª–µ–Ω—ñ —Ç–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑:",
    "create_cancelled": "”®—Ç—ñ–Ω—ñ–º —Ç–æ“õ—Ç–∞—Ç—ã–ª–¥—ã.",
    "create_submitted": "”®—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã. –ú”ô—Ä—Ç–µ–±–µ—Å—ñ: <b>–ñ–∞“£–∞</b>\n\n–ú”ô—Ä—Ç–µ–±–µ—Å—ñ ”©–∑–≥–µ—Ä–≥–µ–Ω –∫–µ–∑–¥–µ —Å—ñ–∑–≥–µ —Ö–∞–±–∞—Ä–ª–∞–π–º—ã–∑.",
    "create_submitted_approval": (
        "”®—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã.\n"
        "–ú”ô—Ä—Ç–µ–±–µ—Å—ñ: <b>“ö–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª—É–¥–∞</b>\n\n"
        "–°—ñ–∑–¥—ñ“£ ”©—Ç—ñ–Ω—ñ–º—ñ“£—ñ–∑–¥—ñ —à–µ–±–µ—Ä –º–µ–Ω ”ô–∫—ñ–º—à—ñ–ª—ñ–∫ “õ–∞—Ä–∞—Å—Ç—ã—Ä–∞–¥—ã. "
        "–®–µ—à—ñ–º —Ç—É—Ä–∞–ª—ã —Å—ñ–∑–≥–µ —Ö–∞–±–∞—Ä–ª–∞–π–º—ã–∑."
    ),
    "cctv_choose_subtype": "–ù–µ “õ–∞–∂–µ—Ç?",
    "face_id_intro": (
        "–°—ñ–∑ —Ç–∞“£–¥–∞–¥—ã“£—ã–∑: <b>FACE ID –±–∞–∑–∞—Å—ã–Ω–∞ “õ–æ—Å—É</b>.\n\n"
        "”ò—Ä –∞–¥–∞–º–Ω—ã“£ –±–µ—Ç —Å—É—Ä–µ—Ç—ñ–Ω –∂—ñ–±–µ—Ä—ñ“£—ñ–∑ (1 –∞–¥–∞–º“ì–∞ 1 —Å—É—Ä–µ—Ç).\n"
        "–¢–∞–ª–∞–ø—Ç–∞—Ä: –±–µ—Ç —ñ—Ä—ñ, –∫”©–∑—ñ–ª–¥—ñ—Ä—ñ–∫—Å—ñ–∑/–º–∞—Å–∫–∞—Å—ã–∑, –∂–∞—Ä—ã“õ—Ç–∞–Ω–¥—ã—Ä—É –∂–∞“õ—Å—ã.\n\n"
        "–ë–∞—Ä–ª—ã“õ —Å—É—Ä–µ—Ç—Ç—ñ –∂“Ø–∫—Ç–µ–≥–µ–Ω–Ω–µ–Ω –∫–µ–π—ñ–Ω ¬´–î–∞–π—ã–Ω¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑."
    ),
    "face_id_photo_added": "–°—É—Ä–µ—Ç “õ–æ—Å—ã–ª–¥—ã ({count} –¥–∞–Ω–∞). –¢–∞“ì—ã –∂—ñ–±–µ—Ä—ñ“£—ñ–∑ –Ω–µ–º–µ—Å–µ ¬´–î–∞–π—ã–Ω¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.",
    "face_id_describe": "–°“±—Ä–∞–Ω—ã—Å—Ç—ã —Ç–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑ (–Ω–µ–º–µ—Å–µ ¬´–ë–∞–∑–∞“ì–∞ “õ–æ—Å—É¬ª –¥–µ–ø –∂–∞–∑—ã“£—ã–∑):",
    "car_plate_intro": "–°—ñ–∑ —Ç–∞“£–¥–∞–¥—ã“£—ã–∑: <b>–ê–≤—Ç–æ–∫”©–ª—ñ–∫ –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä—ñ–Ω “õ–æ—Å—É</b>.\n\n–ê–≤—Ç–æ–∫”©–ª—ñ–∫—Ç—ñ“£ –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑ (–º—ã—Å–∞–ª—ã: 777ABC02):",
    "car_plate_choose_gate": "“ö–∞–π –∫—ñ—Ä–µ–±–µ—Ä—ñ—Å—Ç–µ–Ω –∫—ñ—Ä–µ—Å—ñ–∑?",
    "car_plate_has_parking": "–°—ñ–∑–¥–µ –ø–∞—Ä–∫–∏–Ω–≥ –±–∞—Ä –º–∞?",
    "car_plate_upload_contract": (
        "–ü–∞—Ä–∫–∏–Ω–≥—Ç—ñ“£ —Å–∞—Ç—ã–ø –∞–ª—É-—Å–∞—Ç—É —à–∞—Ä—Ç—ã–Ω—ã“£ —Å—É—Ä–µ—Ç—ñ–Ω –Ω–µ–º–µ—Å–µ “õ“±–∂–∞—Ç—ã–Ω –∂—ñ–±–µ—Ä—ñ“£—ñ–∑.\n\n"
        "–ë“±–ª –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–¥—ñ “õ–æ—Å—É “õ“±“õ—ã“ì—ã–Ω —Ä–∞—Å—Ç–∞—É “Ø—à—ñ–Ω “õ–∞–∂–µ—Ç."
    ),
    "car_plate_enter_reason": (
        "–®–ª–∞–≥–±–∞—É–º–Ω–∞–Ω ”©—Ç—É “Ø—à—ñ–Ω –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–¥—ñ “õ–æ—Å—É —Å–µ–±–µ–±—ñ–Ω –∫”©—Ä—Å–µ—Ç—ñ“£—ñ–∑:\n\n"
        "(–º—ã—Å–∞–ª—ã: “õ–æ–Ω–∞“õ, —Ç–∞–∫—Å–∏, –∫—É—Ä—å–µ—Ä, –∂–∞–ª“ì–∞ –∞–ª—É—à—ã –∂”ô–Ω–µ —Ç.–±.)"
    ),
    "car_plate_enter_parking": "–ü–∞—Ä–∫–∏–Ω–≥ –Ω”©–º—ñ—Ä—ñ“£—ñ–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:",
    "camera_enter_email": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–¥—ã“õ –ø–æ—à—Ç–∞“£—ã–∑–¥—ã (email) –∂—ñ–±–µ—Ä—ñ“£—ñ–∑:",
    "camera_enter_details": "“ö–∞–π –∫–∞–º–µ—Ä–∞–ª–∞—Ä“ì–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É –∫–µ—Ä–µ–∫ –µ–∫–µ–Ω—ñ–Ω –∂–∞–∑—ã“£—ã–∑ (–±–ª–æ–∫, –∫—ñ—Ä–µ–±–µ—Ä—ñ—Å –∂”ô–Ω–µ “õ–∞–±–∞—Ç –Ω”©–º—ñ—Ä–ª–µ—Ä—ñ):",
    "intercom_intro": "–°—ñ–∑ —Ç–∞“£–¥–∞–¥—ã“£—ã–∑: <b>–î–æ–º–æ—Ñ–æ–Ω ‚Äî –∞“õ–∞—É–ª—ã“õ –Ω–µ–º–µ—Å–µ –æ—Ä–Ω–∞—Ç—É</b>.\n”®—Ç—ñ–Ω—ñ—à —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑:",
    "key_intro": "–°—ñ–∑ —Ç–∞“£–¥–∞–¥—ã“£—ã–∑: <b>–ö—ñ–ª—Ç/–º–∞–≥–Ω–∏—Ç—Ç—ñ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É</b>.\n\n–ù–µ—à–µ –∫—ñ–ª—Ç “õ–∞–∂–µ—Ç?",
    "key_choose_type": "–ñ–∞“£–∞ –∫—ñ–ª—Ç –ø–µ, ”ô–ª–¥–µ “õ–∞–π—Ç–∞ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É –º–∞?",
    "key_add_comment": "–ü—ñ–∫—ñ—Ä “õ–æ—Å—ã“£—ã–∑ –Ω–µ–º–µ—Å–µ ¬´–î–∞–π—ã–Ω¬ª –¥–µ–ø –∂–∞–∑—ã“£—ã–∑:",
    "other_intro": "–°—ñ–∑ —Ç–∞“£–¥–∞–¥—ã“£—ã–∑: <b>–ë–∞—Å“õ–∞</b>.\n\n–ù–µ “õ–∞–∂–µ—Ç –µ–∫–µ–Ω—ñ–Ω —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑ ‚Äî —à–µ–±–µ—Ä–≥–µ –∂—ñ–±–µ—Ä–µ–º—ñ–∑.\n–°–∏–ø–∞—Ç—Ç–∞–º–∞–Ω—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:",
    "photo_added": "–°—É—Ä–µ—Ç “õ–æ—Å—ã–ª–¥—ã ({count} –¥–∞–Ω–∞). –¢–∞“ì—ã –∂—ñ–±–µ—Ä—ñ“£—ñ–∑ –Ω–µ–º–µ—Å–µ ¬´–î–∞–π—ã–Ω¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.",
    "file_added": "–§–∞–π–ª “õ–æ—Å—ã–ª–¥—ã ({count} –¥–∞–Ω–∞). –¢–∞“ì—ã –∂—ñ–±–µ—Ä—ñ“£—ñ–∑ –Ω–µ–º–µ—Å–µ ¬´–î–∞–π—ã–Ω¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.",
    "describe_request": "–°“±—Ä–∞–Ω—ã—Å—Ç—ã —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑:",
    "owner_no_tickets": "–°—ñ–∑–¥–µ ”ô–∑—ñ—Ä–≥–µ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä –∂–æ“õ.",
    "owner_tickets_page": "–°—ñ–∑–¥—ñ“£ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä—ñ“£—ñ–∑ (–±–µ—Ç {page}/{total}):",
    "choose_instruction": "–ù“±—Å“õ–∞—É–ª—ã“õ—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:",
    "rate_prompt": "”®—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –æ—Ä—ã–Ω–¥–∞–ª—É —Å–∞–ø–∞—Å—ã–Ω –±–∞“ì–∞–ª–∞“£—ã–∑:",
    "rate_ask_comment": "–°—ñ–∑ –±–∞“ì–∞ –±–µ—Ä–¥—ñ“£—ñ–∑: {stars}‚≠ê\n\n–ü—ñ–∫—ñ—Ä “õ–∞–ª–¥—ã—Ä“ì—ã“£—ã–∑ –∫–µ–ª–µ –º–µ?",
    "rate_comment_prompt": "–ü—ñ–∫—ñ—Ä—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã“£—ã–∑:",
    "rate_thanks": "–ë–∞“ì–∞–ª–∞“ì–∞–Ω—ã“£—ã–∑ “Ø—à—ñ–Ω —Ä–∞—Ö–º–µ—Ç!",
    "rate_already": "–°—ñ–∑ –±“±–ª ”©—Ç—ñ–Ω—ñ–º–¥—ñ –±“±—Ä—ã–Ω –±–∞“ì–∞–ª–∞“ì–∞–Ω—Å—ã–∑.",
    "master_no_new": "¬´–ñ–∞“£–∞¬ª –º”ô—Ä—Ç–µ–±–µ—Å—ñ–Ω–¥–µ–≥—ñ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä –∂–æ“õ.",
    "master_no_tickets": "¬´{status}¬ª –º”ô—Ä—Ç–µ–±–µ—Å—ñ–Ω–¥–µ–≥—ñ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä –∂–æ“õ.",
    "master_new_tickets": "–ñ–∞“£–∞ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä ‚Äî –±–µ—Ç {page}/{total}:",
    "master_tickets_page": "”®—Ç—ñ–Ω—ñ–º–¥–µ—Ä ({status}) ‚Äî –±–µ—Ç {page}/{total}:",
    "master_no_complexes": "–°—ñ–∑–≥–µ —Ç“±—Ä“ì—ã–Ω “Ø–π –∫–µ—à–µ–Ω–¥–µ—Ä—ñ —Ç–∞“ì–∞–π—ã–Ω–¥–∞–ª–º–∞“ì–∞–Ω.",
    "master_ticket_accepted": "–°—ñ–∑ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> “õ–∞–±—ã–ª–¥–∞–¥—ã“£—ã–∑.",
    "master_ticket_completed": "”®—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –æ—Ä—ã–Ω–¥–∞–ª–¥—ã –¥–µ–ø –±–µ–ª–≥—ñ–ª–µ–Ω–¥—ñ.\n–ö–ª–∏–µ–Ω—Ç–∫–µ –±–∞“ì–∞–ª–∞—É —Å“±—Ä–∞—É—ã –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ.",
    "master_already_in_progress": "”®—Ç—ñ–Ω—ñ–º –∂“±–º—ã—Å—Ç–∞.",
    "master_cannot_complete": "–ë“±–ª ”©—Ç—ñ–Ω—ñ–º–¥—ñ –∞—è“õ—Ç–∞—É –º“Ø–º–∫—ñ–Ω –µ–º–µ—Å.",
    "master_car_plate_approved": (
        "‚úÖ –°—ñ–∑ –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –º–∞“õ“±–ª–¥–∞–¥—ã“£—ã–∑.\n\n"
        "”®—Ç—ñ–Ω—ñ–º —Ç“Ø–ø–∫—ñ–ª—ñ–∫—Ç—ñ —à–µ—à—ñ–º “õ–∞–±—ã–ª–¥–∞—É “Ø—à—ñ–Ω ”ô–∫—ñ–º—à—ñ–≥–µ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ."
    ),
    "master_car_plate_rejected": (
        "‚ùå –°—ñ–∑ –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> “õ–∞–±—ã–ª–¥–∞–º–∞–¥—ã“£—ã–∑.\n\n"
        "”®—Ç—ñ–Ω—ñ–º —Ç“Ø–ø–∫—ñ–ª—ñ–∫—Ç—ñ —à–µ—à—ñ–º “õ–∞–±—ã–ª–¥–∞—É “Ø—à—ñ–Ω ”ô–∫—ñ–º—à—ñ–≥–µ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ."
    ),
    "master_already_reviewed": "”®—Ç—ñ–Ω—ñ–º –±“±—Ä—ã–Ω “õ–∞—Ä–∞–ª“ì–∞–Ω.",
    "admin_no_tickets": "”®—Ç—ñ–Ω—ñ–º–¥–µ—Ä —Ç–∞–±—ã–ª–º–∞–¥—ã.",
    "admin_tickets_page": "”®—Ç—ñ–Ω—ñ–º–¥–µ—Ä{filter} ‚Äî –±–µ—Ç {page}/{total}:",
    "admin_choose_complex": "–¢“Æ–ö —Ç–∞“£–¥–∞“£—ã–∑:",
    "admin_choose_master": "–®–µ–±–µ—Ä–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑:",
    "admin_choose_period": "–ö–µ–∑–µ“£–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑:",
    "admin_no_masters": "“ö–æ–ª–∂–µ—Ç—ñ–º–¥—ñ —à–µ–±–µ—Ä–ª–µ—Ä –∂–æ“õ.",
    "admin_master_assigned": "–®–µ–±–µ—Ä —Ç–∞“ì–∞–π—ã–Ω–¥–∞–ª–¥—ã!",
    "admin_master_not_found": "–®–µ–±–µ—Ä —Ç–∞–±—ã–ª–º–∞–¥—ã.",
    "admin_choose_master_for": "”®—Ç—ñ–Ω—ñ–º ‚Ññ{ticket_id} “Ø—à—ñ–Ω —à–µ–±–µ—Ä–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑:",
    "admin_car_plate_approved": "‚úÖ –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> <b>–ú–ê“ö“∞–õ–î–ê–ù–î–´</b>.\n\n–ö–ª–∏–µ–Ω—Ç–∫–µ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—ã–ª–¥—ã.",
    "admin_car_plate_rejected": "‚ùå –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> <b>“ö–ê–ë–´–õ–î–ê–ù–ë–ê–î–´</b>.\n\n–ö–ª–∏–µ–Ω—Ç–∫–µ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—ã–ª–¥—ã.",
    "notify_new_ticket": "üÜï –ñ–∞“£–∞ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b>!\n\n{card}",
    "notify_status_changed": "üìã –°—ñ–∑–¥—ñ“£ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –º”ô—Ä—Ç–µ–±–µ—Å—ñ ”©–∑–≥–µ—Ä–¥—ñ: <b>{status}</b>",
    "notify_status_with_master": "üìã –°—ñ–∑–¥—ñ“£ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –º”ô—Ä—Ç–µ–±–µ—Å—ñ ”©–∑–≥–µ—Ä–¥—ñ: <b>{status}</b>\n–®–µ–±–µ—Ä: {master}",
    "notify_completed": "‚úÖ –°—ñ–∑–¥—ñ“£ ”©—Ç—ñ–Ω—ñ–º <b>‚Ññ{ticket_id}</b> –æ—Ä—ã–Ω–¥–∞–ª–¥—ã!\n\n–ñ“±–º—ã—Å —Å–∞–ø–∞—Å—ã–Ω –±–∞“ì–∞–ª–∞“£—ã–∑:",
    "notify_car_plate_approval": "üöó –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–≥–µ –∂–∞“£–∞ ”©—Ç—ñ–Ω—ñ–º —Ç–µ–∫—Å–µ—Ä—É–¥—ñ “õ–∞–∂–µ—Ç –µ—Ç–µ–¥—ñ!\n\n{card}",
    "notify_car_plate_admin_review": "üöó –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–≥–µ ”©—Ç—ñ–Ω—ñ–º ‚Äî —à–µ–±–µ—Ä–¥—ñ“£ —à–µ—à—ñ–º—ñ: <b>{decision}</b>\n\n{card}",
    "notify_car_plate_approved": "‚úÖ –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º—ñ“£—ñ–∑ <b>‚Ññ{ticket_id}</b> <b>–ú–ê“ö“∞–õ–î–ê–ù–î–´</b>!\n\n–ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä –∂“Ø–π–µ–≥–µ “õ–æ—Å—ã–ª–∞–¥—ã.",
    "notify_car_plate_rejected": "‚ùå –ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä “õ–æ—Å—É –±–æ–π—ã–Ω—à–∞ ”©—Ç—ñ–Ω—ñ–º—ñ“£—ñ–∑ <b>‚Ññ{ticket_id}</b> <b>“ö–ê–ë–´–õ–î–ê–ù–ë–ê–î–´</b>.\n\n–¢–æ–ª—ã“ì—ã—Ä–∞“õ –∞“õ–ø–∞—Ä–∞—Ç –∞–ª—É “Ø—à—ñ–Ω —Å–µ—Ä–≤–∏—Å—Ç—ñ–∫ “õ—ã–∑–º–µ—Ç–∫–µ —Ö–∞–±–∞—Ä–ª–∞—Å—ã“£—ã–∑.",
    "notify_car_plate_in_progress": (
        "‚úÖ ”ò–∫—ñ–º—à—ñ –º–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–≥–µ ”©—Ç—ñ–Ω—ñ–º–¥—ñ –º–∞“õ“±–ª–¥–∞–¥—ã!\n\n"
        "{card}\n\n"
        "–ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫ –Ω”©–º—ñ—Ä–¥—ñ –∂“Ø–π–µ–≥–µ “õ–æ—Å—ã–ø, ¬´–û—Ä—ã–Ω–¥–∞–ª–¥—ã¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑."
    ),
    "notify_admin_new_ticket": "üÜï –ñ–∞“£–∞ ”©—Ç—ñ–Ω—ñ–º:\n\n{card}",
    "admin_master_reassigned": "”®—Ç—ñ–Ω—ñ–º ‚Ññ{ticket_id} —à–µ–±–µ—Ä—ñ <b>{master_name}</b> –±–æ–ª—ã–ø ”©–∑–≥–µ—Ä—Ç—ñ–ª–¥—ñ.",
    "btn_send_contact": "–ö–æ–Ω—Ç–∞–∫—Ç—Ç—ã –∂—ñ–±–µ—Ä—É",
    "btn_cancel": "–ë–æ–ª–¥—ã—Ä–º–∞—É",
    "btn_back": "–ê—Ä—Ç“õ–∞",
    "btn_done": "–î–∞–π—ã–Ω",
    "btn_skip": "”®—Ç–∫—ñ–∑—ñ–ø –∂—ñ–±–µ—Ä—É",
    "btn_confirm": "”®—Ç—ñ–Ω—ñ–º–¥—ñ –∂—ñ–±–µ—Ä—É",
    "btn_edit": "”®–∑–≥–µ—Ä—Ç—É",
    "btn_create_ticket": "”®—Ç—ñ–Ω—ñ–º –∂–∞—Å–∞—É",
    "btn_my_tickets": "–ú–µ–Ω—ñ“£ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä—ñ–º",
    "btn_instructions": "–ù“±—Å“õ–∞—É–ª—ã“õ—Ç–∞—Ä",
    "btn_new_tickets": "–ñ–∞“£–∞ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä",
    "btn_active_tickets": "–ú–µ–Ω—ñ“£ –±–µ–ª—Å–µ–Ω–¥—ñ ”©—Ç—ñ–Ω—ñ–º–¥–µ—Ä—ñ–º",
    "btn_completed": "–û—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω–¥–∞—Ä",
    "btn_accept": "“ö–∞–±—ã–ª–¥–∞—É",
    "btn_complete": "–û—Ä—ã–Ω–¥–∞–ª–¥—ã",
    "btn_approve": "–ú–∞“õ“±–ª–¥–∞—É",
    "btn_reject": "“ö–∞–±—ã–ª–¥–∞–º–∞—É",
    "btn_yes_parking": "–ò”ô, –ø–∞—Ä–∫–∏–Ω–≥ –±–∞—Ä",
    "btn_no_parking": "–ü–∞—Ä–∫–∏–Ω–≥ –∂–æ“õ",
    "btn_rate_add_comment": "–ò”ô, –∂–∞–∑—É",
    "btn_rate_skip_comment": "–ñ–æ“õ, —Ä–∞—Ö–º–µ—Ç",
    "btn_back_to_tickets": "”®—Ç—ñ–Ω—ñ–º–¥–µ—Ä–≥–µ –æ—Ä–∞–ª—É",
    "btn_main_menu": "–ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä",
    "btn_back_to_ticket": "”®—Ç—ñ–Ω—ñ–º–≥–µ –æ—Ä–∞–ª—É",
    "btn_change_language": "–¢—ñ–ª / –Ø–∑—ã–∫",
    "toast_ticket_accepted": "”®—Ç—ñ–Ω—ñ–º “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã!",
    "toast_ticket_completed": "”®—Ç—ñ–Ω—ñ–º –æ—Ä—ã–Ω–¥–∞–ª–¥—ã!",
    "toast_ticket_approved": "”®—Ç—ñ–Ω—ñ–º –º–∞“õ“±–ª–¥–∞–Ω–¥—ã!",
    "toast_ticket_rejected": "”®—Ç—ñ–Ω—ñ–º “õ–∞–±—ã–ª–¥–∞–Ω–±–∞–¥—ã!",
    "toast_ticket_submitted": "”®—Ç—ñ–Ω—ñ–º –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ!",
}

# Text descriptions for admin panel
TEXT_DESCRIPTIONS = {
    "start_welcome": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ /start",
    "auth_success": "–£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ({full_name} - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)",
    "auth_failed": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ",
    "auth_send_contact": "–ü—Ä–æ—Å—å–±–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç",
    "menu_owner": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é –≤–ª–∞–¥–µ–ª—å—Ü–∞",
    "menu_master": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é –º–∞—Å—Ç–µ—Ä–∞",
    "menu_admin": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞",
    "action_cancelled": "–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ",
    "error_generic": "–û–±—â–∞—è –æ—à–∏–±–∫–∞",
    "help_text": "–¢–µ–∫—Å—Ç –∫–æ–º–∞–Ω–¥—ã /help",
    "create_limit_reached": "–õ–∏–º–∏—Ç –∑–∞—è–≤–æ–∫ –≤ –¥–µ–Ω—å ({count}, {limit})",
    "create_choose_complex": "–í—ã–±–æ—Ä –ñ–ö",
    "create_choose_entrance": "–í—ã–±–æ—Ä –ø–æ–¥—ä–µ–∑–¥–∞",
    "create_choose_block": "–í—ã–±–æ—Ä –±–ª–æ–∫–∞",
    "create_enter_apartment": "–í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã",
    "create_choose_category": "–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    "create_enter_description": "–í–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã",
    "create_cancelled": "–ó–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞",
    "create_submitted": "–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ ({ticket_id})",
    "create_submitted_approval": "–ó–∞—è–≤–∫–∞ –Ω–∞ –≥–æ—Å–Ω–æ–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∞ ({ticket_id})",
    "face_id_intro": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Face ID",
    "car_plate_intro": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≥–æ—Å–Ω–æ–º–µ—Ä–∞",
    "car_plate_has_parking": "–í–æ–ø—Ä–æ—Å –æ –Ω–∞–ª–∏—á–∏–∏ –ø–∞—Ä–∫–∏–Ω–≥–∞",
    "car_plate_upload_contract": "–ü—Ä–æ—Å—å–±–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä",
    "car_plate_enter_reason": "–í–≤–æ–¥ –ø—Ä–∏—á–∏–Ω—ã (–±–µ–∑ –ø–∞—Ä–∫–∏–Ω–≥–∞)",
    "intercom_intro": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –¥–æ–º–æ—Ñ–æ–Ω–∞",
    "key_intro": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–ª—é—á–µ–π",
    "other_intro": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—á–µ–≥–æ",
    "owner_no_tickets": "–ù–µ—Ç –∑–∞—è–≤–æ–∫ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞",
    "rate_prompt": "–ó–∞–ø—Ä–æ—Å –æ—Ü–µ–Ω–∫–∏ ({ticket_id})",
    "rate_ask_comment": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ({stars})",
    "rate_thanks": "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –æ—Ü–µ–Ω–∫—É",
    "master_no_new": "–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫",
    "master_ticket_accepted": "–ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–Ω—è–ª –∑–∞—è–≤–∫—É ({ticket_id})",
    "master_ticket_completed": "–ú–∞—Å—Ç–µ—Ä –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞—è–≤–∫—É ({ticket_id})",
    "notify_new_ticket": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ ({ticket_id}, {card})",
    "notify_completed": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ ({ticket_id})",
    "notify_car_plate_approved": "–ì–æ—Å–Ω–æ–º–µ—Ä –æ–¥–æ–±—Ä–µ–Ω ({ticket_id})",
    "notify_car_plate_rejected": "–ì–æ—Å–Ω–æ–º–µ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω ({ticket_id})",
    "notify_car_plate_in_progress": "–ì–æ—Å–Ω–æ–º–µ—Ä –æ–¥–æ–±—Ä–µ–Ω –∞–¥–º–∏–Ω–æ–º, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –º–∞—Å—Ç–µ—Ä—É ({card})",
    "notify_admin_new_ticket": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ ({card})",
    "admin_master_reassigned": "–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ –º–∞—Å—Ç–µ—Ä–∞ ({ticket_id}, {master_name})",
}


async def load_cache(session: AsyncSession) -> None:
    """Load all texts into memory cache."""
    global _cache, _cache_loaded, _cache_updated_at
    _cache = await bot_text_repo.get_all_as_dict(session)
    _cache_loaded = True
    _cache_updated_at = time.time()
    logger.info("Loaded %d bot texts into cache", len(_cache))


async def get_text(session: AsyncSession, key: str, **kwargs) -> str:
    """
    Get text by key in the current language.
    Falls back: current_lang -> ru -> DEFAULT_TEXTS -> [key].
    Auto-refreshes cache every CACHE_TTL seconds.
    """
    global _cache, _cache_loaded, _cache_updated_at

    lang = current_language.get()

    # Auto-refresh cache if TTL expired
    if _cache_loaded and (time.time() - _cache_updated_at) > CACHE_TTL:
        try:
            await load_cache(session)
        except Exception as e:
            logger.warning("Failed to refresh text cache: %s", e)

    # Try cache first
    text = None
    if _cache_loaded and key in _cache:
        text = _cache[key].get(lang) or _cache[key].get(DEFAULT_LANGUAGE)

    if text is None:
        # Try DB
        text = await bot_text_repo.get_by_key(session, key, lang)
        if text is None and lang != DEFAULT_LANGUAGE:
            text = await bot_text_repo.get_by_key(session, key, DEFAULT_LANGUAGE)

    if text is None:
        # Fall back to default
        if lang == "kk":
            text = DEFAULT_TEXTS_KK.get(key)
        if text is None:
            text = DEFAULT_TEXTS.get(key, f"[{key}]")

    # Format with kwargs if provided
    if kwargs:
        try:
            text = text.format(**kwargs)
        except KeyError as e:
            logger.warning("Missing format key %s for text %s", e, key)

    return text


def get_text_sync(key: str, **kwargs) -> str:
    """
    Synchronous version - uses cache or defaults only.
    Use for keyboards where async is not available.
    """
    lang = current_language.get()

    text = None
    if _cache_loaded and key in _cache:
        text = _cache[key].get(lang) or _cache[key].get(DEFAULT_LANGUAGE)

    if text is None:
        if lang == "kk":
            text = DEFAULT_TEXTS_KK.get(key)
        if text is None:
            text = DEFAULT_TEXTS.get(key, f"[{key}]")

    if kwargs:
        try:
            text = text.format(**kwargs)
        except KeyError:
            pass

    return text


async def refresh_cache(session: AsyncSession) -> None:
    """Force refresh the cache from DB."""
    await load_cache(session)


async def seed_default_texts(session: AsyncSession) -> int:
    """Seed all default texts into DB for both languages if not exists."""
    count = 0
    for key, value in DEFAULT_TEXTS.items():
        description = TEXT_DESCRIPTIONS.get(key)
        # Seed Russian
        existing = await bot_text_repo.get_by_key(session, key, "ru")
        if not existing:
            await bot_text_repo.upsert(session, key, value, "ru", description)
            count += 1
        # Seed Kazakh
        kk_value = DEFAULT_TEXTS_KK.get(key, value)
        existing_kk = await bot_text_repo.get_by_key(session, key, "kk")
        if not existing_kk:
            await bot_text_repo.upsert(session, key, kk_value, "kk", description)
            count += 1
    return count
